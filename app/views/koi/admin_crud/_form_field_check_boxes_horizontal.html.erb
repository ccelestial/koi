<% 
  crud_settings = resource_class.crud.find(:fields, attr)

  wrapper_opts = {}
  input_opts = {} 
  wrapper_opts[:class] = "form--horizontal"

  if crud_settings
    wrapper_opts[:data] = crud_settings[:wrapper_data]
    input_opts[:class] += " form--#{crud_settings[:size]}" if crud_settings[:size]
  end
%>

<% data = resource_class.crud.find(:fields, attr, :data) %>
<% if data.nil? %>
  <%= f.input attr.to_sym, :as => :check_boxes, wrapper_html: wrapper_opts, input_html: input_opts %>
<% else %>
  <%= f.input attr.to_sym, :as => :check_boxes, collection: data, wrapper_html: wrapper_opts, input_html: input_opts %>
<% end %>

<%= render "koi/admin_crud/form_field_collection_errors", f: f, attr: attr %>